{"version":3,"sources":["game.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["sin","Math","cos","atan2","controlKey","up","down","left","right","shoot","focus","canvas","document","getElementById","c","getContext","c_width","window","screen","width","c_height","innerHeight","height","style","background","lineWidth","strokeStyle","fillStyle","font","maxR","minR","minVertices","maxVertices","maxMapHeight","startMapLevel","n_enemy","bullet","keyPressedPool","Set","p_angle","angle","translate_x","translate_y","o_bulletTimer","bulletTimer","org_x","org_y","org_player_x","org_player_y","player_size","player","enemy","score","scoremult","popUps","enemyInView","maxBurstAmmount","whiteRGB","r","g","b","isEndless","isHardMode","Bullet","x","y","_dir","bulletSpeed","_damage","px","py","img","can","createElement","_c","beginPath","arc","PI","fill","dir","state","damage","bullet_start_dir","ModifiedRandomAboveAvg","random","ModifiedRandomBelowAvg","getMaxMinCo_Enemy","_enemy","x_arr","data","map","a","ox","x_max","max","x_min","min","y_arr","oy","y_max","y_min","xMax","xMin","yMax","yMin","normalizeVector","_x","_y","mag","sqrt","checkCollision","x1","y1","x2","y2","x3","y3","x4","y4","dem","uA","uB","checkCollision_Bullet_Enemy","_bullet","xC","yC","minIndex","minDistSq","xM","yM","_nx","_ny","i","l","length","xA","yA","xB","yB","_an","_bn","_xM","_yM","distSq","n","IM","dotP","m","normal","index","getCentroidOfPolygon","polygon","signedArea","Cx","Cy","checkIfPolygonSelfIntersect","getAreaOfPolygon","A","sg","j","abs","addPopUp","text","frame","nf","push","handleEnemyDeathAndSplit","inter_index","health","o_health","spawned","t","e1","arr","oldCenterX","oldCenterY","copy_of_b","splice","newCenter","q","EnemyFromData","e2","newRandomEnemy","handleCollision_Bullet_Enemy","b_x","b_y","inter_x","inter_y","inter_count","inter","xd","yd","max_v","_n","shootBullet","reset","size","ax","ay","burstBullet","randomAngle","randomSpeedMult","newDirX","newDirY","Enemy","o_x","o_y","min_v","min_r","max_r","nVertices","_a","EnemyData","_maxR","_r","_health","positon_data","top","bottom","e","createPlayer","vx","vy","update","moveTo","lineTo","closePath","stroke","resetPlayer","drawEnemy","updateEnemy","drawPlayer","_player","save","translate","rotate","drawImage","restore","drawBullet","addEventListener","event","clientY","clientX","playerAccel","add","code","delete","button","clear","oncontextmenu","location","reload","setup","draw","clearRect","fillText","squareDist","player_x","player_y","some","has","requestAnimationFrame","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","hmrApply","v","hmrAcceptRun","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","remove","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","cb"],"mappings":"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","file":"game.7bbe06d5.js","sourceRoot":"..\\src","sourcesContent":["let { sin, cos, atan2 } = Math;\r\n\r\nlet controlKey = {\r\n  up: [\"ArrowUp\", \"KeyW\"],\r\n  down: [\"ArrowDown\", \"KeyS\"],\r\n  left: [\"ArrowLeft\", \"KeyA\"],\r\n  right: [\"ArrowRight\", \"KeyD\"],\r\n  shoot: [\"KeyZ\", \"LeftMouse\"],\r\n  focus: [\"ShiftLeft\"],\r\n};\r\n\r\n//#region Global varibles\r\nlet canvas = document.getElementById(\"main-canvas\");\r\nlet c = canvas.getContext(\"2d\");\r\n\r\nlet c_width = window.screen.width;\r\nlet c_height = window.innerHeight;\r\ncanvas.width = c_width;\r\ncanvas.height = c_height;\r\ncanvas.style.background = \"#000000\";\r\nc.lineWidth = 3;\r\nc.strokeStyle = \"#ffffff\";\r\nc.fillStyle = \"#ffffff\";\r\nc.font = \"22px pressStart\";\r\n\r\nlet maxR = 300, //Maximun size of asteroid\r\n  minR = 40, //Minimun size of asteroid\r\n  minVertices = 7,\r\n  maxVertices = 25,\r\n  maxMapHeight = 7 * c_height, //Maximun scroll height\r\n  startMapLevel = 0, // Map's portion to start at\r\n  n_enemy = 15, // Number of enemy\r\n  bullet = [], // Array containing all bullet object\r\n  keyPressedPool = new Set(), // Set containing user's inputs\r\n  p_angle = 0, // Previous angle of player (Pointing to mouse)\r\n  angle = 0, // Angle of player (Pointing to mouse)\r\n  translate_x = 0, // Amount x to translate when player moves (Camera Follow)\r\n  translate_y = 0, // Amount y to translate when player moves (Camera Follow)\r\n  o_bulletTimer = 4, // Number of iteration before shooting bullet (bullet per 4 frames)\r\n  bulletTimer = 0, // Count ^\r\n  org_x = 0, // x of top left corner\r\n  org_y = 0, // y of top left corner\r\n  org_player_x = c_width / 2,\r\n  org_player_y = c_height / 1.5,\r\n  player_size = 30,\r\n  player,\r\n  enemy = [],\r\n  score = 0,\r\n  scoremult = 1,\r\n  popUps = [],\r\n  // enemiesToShowHealth = { 0: 0 },\r\n  enemyInView = new Set(),\r\n  maxBurstAmmount = 20,\r\n  whiteRGB = {r: 255, g: 255,b: 255};\r\n\r\nlet isEndless = 0,\r\n  isHardMode = 0;\r\n//#endregion\r\n\r\n//#region Setup Functions\r\n\r\n//#region Classes\r\nclass Bullet {\r\n  static bulletSpeed = 14;\r\n  constructor(x, y, r, _dir = { x: 0, y: -Bullet.bulletSpeed }, _damage = 1) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.px = x;\r\n    this.py = y;\r\n    this.r = r;\r\n    this.img = (() => {\r\n      let can = document.createElement(\"canvas\");\r\n      let _c = can.getContext(\"2d\");\r\n      can.width = r * 2;\r\n      can.height = r * 2;\r\n      _c.fillStyle = \"#ffffff\";\r\n      _c.beginPath();\r\n      _c.arc(r, r, r, 0, 2 * Math.PI);\r\n      _c.fill();\r\n      return can;\r\n    })();\r\n    this.dir = _dir;\r\n    this.state = 1;\r\n    this.damage = _damage;\r\n  }\r\n  update() {\r\n    this.x += this.dir.x;\r\n    this.y += this.dir.y;\r\n  }\r\n  reset(x, y, _dir = { x: 0, y: -Bullet.bulletSpeed }, _damage = 1) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.px = x;\r\n    this.py = y;\r\n    this.dir = _dir;\r\n    this.state = 1;\r\n    this.damage = _damage;\r\n  }\r\n}\r\nlet bullet_start_dir = { x: 0, y: -Bullet.bulletSpeed }; // Starting position of bullet\r\n//#endregion\r\n\r\n//#region Misc Fucntions\r\nfunction ModifiedRandomAboveAvg() {\r\n  let x = Math.random();\r\n  return 4.5 * x ** 3 - 8.3 * x ** 2 + 4.8 * x;\r\n}\r\nfunction ModifiedRandomBelowAvg() {\r\n  let x = Math.random();\r\n  return 2.2 * x ** 3 - 3 * x ** 2 + 1.8 * x;\r\n}\r\nfunction getMaxMinCo_Enemy(_enemy) {\r\n  let x_arr = _enemy.data.map((a) => a.x - a.ox);\r\n  let x_max = Math.max(...x_arr),\r\n    x_min = Math.min(...x_arr);\r\n  let y_arr = _enemy.data.map((b) => b.y - b.oy);\r\n  let y_max = Math.max(...y_arr),\r\n    y_min = Math.min(...y_arr);\r\n\r\n  return {\r\n    xMax: x_max,\r\n    xMin: x_min,\r\n    yMax: y_max,\r\n    yMin: y_min,\r\n  };\r\n}\r\nfunction normalizeVector(_x, _y) {\r\n  let mag = Math.sqrt(_x ** 2 + _y ** 2);\r\n  return {\r\n    x: _x / mag,\r\n    y: _y / mag,\r\n  };\r\n}\r\nfunction checkCollision(x1, y1, x2, y2, x3, y3, x4, y4) {\r\n  let dem = (y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1);\r\n  let uA = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / dem;\r\n  let uB = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / dem;\r\n  if (uA >= 0 && uA <= 1 && uB >= 0 && uB <= 1) {\r\n    return {\r\n      x: x1 + uA * (x2 - x1),\r\n      y: y1 + uA * (y2 - y1),\r\n    };\r\n  }\r\n  return null;\r\n}\r\nfunction checkCollision_Bullet_Enemy(_bullet, _enemy) {\r\n  let xC = _bullet.x,\r\n    yC = _bullet.y;\r\n  let minIndex = -1,\r\n    minDistSq = 0,\r\n    xM = 0,\r\n    yM = 0,\r\n    _nx = 0,\r\n    _ny = 0;\r\n  for (let i = 0, l = _enemy.data.length; i !== l; i++) {\r\n    let xA = _enemy.data[i].x,\r\n      yA = _enemy.data[i].y,\r\n      xB = _enemy.data[(i + 1) % l].x,\r\n      yB = _enemy.data[(i + 1) % l].y;\r\n    let _an = yA - yB,\r\n      _bn = xB - xA,\r\n      a = -_an / _bn,\r\n      b = (_an / _bn) * xA + yA,\r\n      _xM = (xC + a * yC - a * b) / (1 + a * a),\r\n      _yM = (a * a * yC + a * xC + b) / (1 + a * a);\r\n    let distSq = (_xM - xC) * (_xM - xC) + (_yM - yC) * (_yM - yC);\r\n    // c.beginPath();\r\n    // c.arc(_xM, _yM, 10, 0, 2*Math.PI);\r\n    // c.stroke();\r\n    if ((_xM < xA && _xM > xB) || (_xM > xA && _xM < xB)) {\r\n      if (minIndex === -1) {\r\n        minIndex = i;\r\n        minDistSq = distSq;\r\n        (xM = _xM), (yM = _yM);\r\n        (_nx = yA - yB), (_ny = xB - xA);\r\n      } else if (distSq < minDistSq) {\r\n        minIndex = i;\r\n        minDistSq = distSq;\r\n        (xM = _xM), (yM = _yM);\r\n        (_nx = _an), (_ny = _bn);\r\n      }\r\n    }\r\n  }\r\n  let n = normalizeVector(_nx, _ny),\r\n    IM = {\r\n      x: xM - xC,\r\n      y: yM - yC,\r\n    };\r\n  let dotP = IM.x * n.x + IM.y * n.y,\r\n    m = 0;\r\n  if (minDistSq < _bullet.r * _bullet.r) {\r\n    m = _bullet.r - Math.sqrt(minDistSq);\r\n    return {\r\n      x: xC - m * n.x,\r\n      y: yC - m * n.y,\r\n      normal: n,\r\n      index: minIndex,\r\n    };\r\n  }\r\n  return false;\r\n}\r\nfunction getCentroidOfPolygon(polygon) {\r\n  let signedArea = 0,\r\n    Cx = 0,\r\n    Cy = 0;\r\n  for (let i = 0, l = polygon.length; i !== l; i++) {\r\n    let a =\r\n      polygon[i].x * polygon[(i + 1) % l].y -\r\n      polygon[(i + 1) % l].x * polygon[i].y;\r\n    signedArea += a;\r\n    Cx += (polygon[i].x + polygon[(i + 1) % l].x) * a;\r\n    Cy += (polygon[i].y + polygon[(i + 1) % l].y) * a;\r\n  }\r\n  signedArea *= 0.5;\r\n  let b = 1 / (6 * signedArea);\r\n  Cx *= b;\r\n  Cy *= b;\r\n  return {\r\n    x: Cx,\r\n    y: Cy,\r\n  };\r\n}\r\nfunction checkIfPolygonSelfIntersect(polygon) {\r\n  for (let i = 0, l = polygon.length; i !== l; i++) {\r\n    if (\r\n      checkCollision(\r\n        polygon[i].x,\r\n        polygon[i].y,\r\n        polygon[(i + 1) % l].x,\r\n        polygon[(i + 1) % l].y,\r\n        polygon[(i + 2) % l].x,\r\n        polygon[(i + 2) % l].y,\r\n        polygon[(i + 3) % l].x,\r\n        polygon[(i + 3) % l].y\r\n      )\r\n    ) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\nfunction getAreaOfPolygon(polygon) {\r\n  let A = 0,\r\n    sg = 1;\r\n  for (let i = 0; i !== 2; i++) {\r\n    for (let j = 0, l = polygon.length; j !== l; j++) {\r\n      A += sg * polygon[(j + i) % l].x * polygon[(j + i + sg) % l].y;\r\n    }\r\n    sg = -1;\r\n  }\r\n  A = 0.5 * Math.abs(A);\r\n  return A;\r\n}\r\nfunction addPopUp(text, x, y, frame) {\r\n  let nf = 1;\r\n  for (let i = 0; i < popUps.length; i++) {\r\n    if (!popUps[i][3]) {\r\n      popUps[i][0] = text;\r\n      popUps[i][1] = x;\r\n      popUps[i][2] = y;\r\n      popUps[i][3] = frame;\r\n      nf = 0;\r\n      break;\r\n    }\r\n  }\r\n  if (nf) popUps.push([text, x, y, frame]);\r\n}\r\nfunction handleEnemyDeathAndSplit(_enemy, inter_index) {\r\n  //#region Enemy die and split\r\n  if (_enemy.data[inter_index].health > 0) return;\r\n  _enemy.state = 0;\r\n  _enemy.data[inter_index].health = _enemy.o_health;\r\n  _enemy.data[inter_index].g = 255;\r\n  _enemy.data[inter_index].b = 255;\r\n  addPopUp(~~_enemy.o_health, _enemy.data[0].ox, _enemy.data[0].oy, 30);\r\n  score += _enemy.o_health * scoremult;\r\n  let spawned = 0;\r\n  let t = (inter_index + 1 + ~~(_enemy.data.length / 2)) % _enemy.data.length;\r\n  let a = inter_index + 1,\r\n    b = t,\r\n    e1;\r\n  let arr = _enemy.data;\r\n  let oldCenterX = arr[0].ox,\r\n    oldCenterY = arr[0].oy;\r\n  let copy_of_b = { ...arr[b] };\r\n  if (a < b) {\r\n    e1 = arr.splice(\r\n      a,\r\n      b - a + 1,\r\n      {\r\n        ox: arr[0].ox,\r\n        oy: arr[0].oy,\r\n        x: arr[0].ox,\r\n        y: arr[0].oy,\r\n        health: _enemy.o_health,\r\n        ...whiteRGB,\r\n      },\r\n      copy_of_b\r\n    );\r\n  } else {\r\n    e1 = arr.splice(b, a - b, copy_of_b, {\r\n      ox: arr[0].ox,\r\n      oy: arr[0].oy,\r\n      x: arr[0].ox,\r\n      y: arr[0].oy,\r\n      health: _enemy.o_health,\r\n      ...whiteRGB,\r\n    });\r\n  }\r\n  e1.push({\r\n    ox: arr[0].ox,\r\n    oy: arr[0].oy,\r\n    x: arr[0].ox,\r\n    y: arr[0].oy,\r\n    health: _enemy.o_health,\r\n    ...whiteRGB,\r\n  });\r\n  if (e1.length > 3 && !checkIfPolygonSelfIntersect(e1)) {\r\n    let newCenter = getCentroidOfPolygon(e1);\r\n    for (let i = 0; i < e1.length; i++) {\r\n      e1[i].ox = newCenter.x;\r\n      e1[i].oy = newCenter.y;\r\n    }\r\n    let q = 1;\r\n    for (let j = 0; j < enemy.length; j++) {\r\n      if (!enemy[j].state){\r\n        enemy[j] = new EnemyFromData(e1, _enemy.o_health, {\r\n          x: _enemy.dir.x + (2 * (e1[0].ox - oldCenterX)) / _enemy.maxR,\r\n          y: _enemy.dir.y + (2 * (e1[0].oy - oldCenterY)) / _enemy.maxR,\r\n        });\r\n        if (getAreaOfPolygon(enemy[j].data) < 1800) {\r\n          enemy[j].state = 0;\r\n          spawned--;\r\n        }\r\n        q = 0;\r\n        break;\r\n      }\r\n    }\r\n    if (q) {\r\n      enemy.push(\r\n        new EnemyFromData(e1, _enemy.o_health, {\r\n          x: _enemy.dir.x + (2 * (e1[0].ox - oldCenterX)) / _enemy.maxR,\r\n          y: _enemy.dir.y + (2 * (e1[0].oy - oldCenterY)) / _enemy.maxR,\r\n        })\r\n      );\r\n      if (getAreaOfPolygon(enemy[enemy.length - 1].data) < 1800) {\r\n        enemy[enemy.length - 1].state = 0;\r\n        spawned--;\r\n      }\r\n    }\r\n    spawned++;\r\n  }\r\n  let e2 = arr;\r\n  if (e2.length > 3 && !checkIfPolygonSelfIntersect(e2)) {\r\n    let newCenter = getCentroidOfPolygon(e2);\r\n    for (let i = 0; i < e2.length; i++) {\r\n      e2[i].ox = newCenter.x;\r\n      e2[i].oy = newCenter.y;\r\n    }\r\n    let q = 1;\r\n    for (let j = 0; j < enemy.length; j++) {\r\n      if (!enemy[j].state){\r\n        enemy[j] = new EnemyFromData(e2, _enemy.o_health, {\r\n          x: _enemy.dir.x + (2 * (e2[0].ox - oldCenterX)) / _enemy.maxR,\r\n          y: _enemy.dir.y + (2 * (e2[0].oy - oldCenterY)) / _enemy.maxR,\r\n        });\r\n        if (getAreaOfPolygon(enemy[j].data) < 1800) {\r\n          enemy[j].state = 0;\r\n          spawned--;\r\n        }\r\n        q = 0;\r\n        break;\r\n      }\r\n    }\r\n    if (q) {\r\n      enemy.push(\r\n        new EnemyFromData(e2, _enemy.o_health, {\r\n          x: _enemy.dir.x + (2 * (e2[0].ox - oldCenterX)) / _enemy.maxR,\r\n          y: _enemy.dir.y + (2 * (e2[0].oy - oldCenterY)) / _enemy.maxR,\r\n        })\r\n      );\r\n      if (getAreaOfPolygon(enemy[enemy.length - 1].data) < 1800) {\r\n        enemy[enemy.length - 1].state = 0;\r\n        spawned--;\r\n      }\r\n    }\r\n    spawned++;\r\n  }\r\n\r\n  if (isEndless && !spawned) {\r\n    let q = 1;\r\n    for (let j = 0; j < enemy.length; j++) {\r\n      if (!enemy[j].state) {\r\n        enemy[j] = newRandomEnemy();\r\n        q = 0;\r\n        break;\r\n      }\r\n    }\r\n    if (q) enemy.push(newRandomEnemy());\r\n  }\r\n  //#endregion\r\n}\r\nfunction handleCollision_Bullet_Enemy(bullet, _enemy) {\r\n  let b_x = bullet.x,\r\n    b_y = bullet.y;\r\n  let inter_x,\r\n    inter_y,\r\n    inter_count = 0,\r\n    inter_index = 0,\r\n    n;\r\n  for (let j = 0, l = _enemy.data.length; j !== l; j++) {\r\n    let x3 = _enemy.data[j].x,\r\n      y3 = _enemy.data[j].y,\r\n      x4 = _enemy.data[(j + 1) % l].x,\r\n      y4 = _enemy.data[(j + 1) % l].y;\r\n    //#region Check how many collision\r\n    let inter = checkCollision(\r\n      b_x,\r\n      b_y,\r\n      bullet.px + _enemy.dir.x,\r\n      bullet.py + _enemy.dir.y,\r\n      x3,\r\n      y3,\r\n      x4,\r\n      y4\r\n    );\r\n    if (inter) {\r\n      inter_index = j;\r\n      inter_count++;\r\n      n = normalizeVector(y3 - y4, x4 - x3);\r\n      inter_x = inter.x;\r\n      inter_y = inter.y;\r\n    }\r\n    //#endregion\r\n  }\r\n  if (inter_count === 1) {\r\n    //#region IF HIT\r\n    let xd = bullet.dir.x,\r\n      yd = bullet.dir.y;\r\n    let t = n.x * xd + n.y * yd;\r\n    if (t >= 0) {\r\n      bullet.dir.x -= 2 * n.x * t - _enemy.dir.x;\r\n      bullet.dir.y -= 2 * n.y * t - _enemy.dir.y;\r\n    } else {\r\n      bullet.dir.x += _enemy.dir.x;\r\n      bullet.dir.y += _enemy.dir.y;\r\n    }\r\n    if (Math.sqrt(_enemy.dir.x ** 2 + _enemy.dir.y ** 2) < player.max_v - 2){\r\n      _enemy.dir.x +=\r\n        (xd - bullet.dir.x) *\r\n        (10 / _enemy.maxR ** 2);\r\n      _enemy.dir.y +=\r\n        (yd - bullet.dir.y) *\r\n        (10 / _enemy.maxR ** 2);\r\n    }\r\n    let _n = normalizeVector(bullet.dir.x, bullet.dir.y);\r\n    1;\r\n    bullet.x = inter_x + _n.x * 0.1;\r\n    bullet.y = inter_y + _n.y * 0.1;\r\n    // bullet.dir.x *= 0.9;\r\n    // bullet.dir.y *= 0.9;\r\n\r\n    _enemy.data[inter_index].health -= bullet.damage;\r\n    _enemy.data[inter_index].g = ~~(255 * _enemy.data[inter_index].health / _enemy.o_health );\r\n    _enemy.data[inter_index].b = _enemy.data[inter_index].g;\r\n    score += bullet.damage * scoremult;\r\n    addPopUp(~~(bullet.damage * 10) / 10, inter_x, inter_y, 10);\r\n    bullet.damage *= Math.sqrt(\r\n      (bullet.dir.x ** 2 + bullet.dir.y ** 2) / (xd ** 2 + yd ** 2)\r\n    );\r\n    //#endregion\r\n    handleEnemyDeathAndSplit(_enemy, inter_index);\r\n  } else if (inter_count !== 0) {\r\n    bullet.state = 0;\r\n    _enemy.data[inter_index].health -= bullet.damage;\r\n    _enemy.data[inter_index].g = ~~(255 * _enemy.data[inter_index].health / _enemy.o_health );\r\n    _enemy.data[inter_index].b = _enemy.data[inter_index].g;\r\n    score += bullet.damage * scoremult;\r\n    addPopUp(~~(bullet.damage * 10) / 10, inter_x, inter_y, 10);\r\n    handleEnemyDeathAndSplit(_enemy, inter_index);\r\n  }\r\n}\r\nfunction shootBullet() {\r\n  if (!bulletTimer) {\r\n    let n = 1;\r\n    for (let i = 0; i < bullet.length; i++) {\r\n      if (!bullet[i].state) {\r\n        bullet[i].reset(\r\n          player.x + (player.size / 2) * cos(angle - Math.PI / 2),\r\n          player.y + (player.size / 2) * sin(angle - Math.PI / 2),\r\n          { ...bullet_start_dir }\r\n        );\r\n        n = 0;\r\n        break;\r\n      }\r\n    }\r\n    if (n)\r\n      bullet.push(\r\n        new Bullet(\r\n          player.x + (player.size / 2) * cos(angle - Math.PI / 2),\r\n          player.y + (player.size / 2) * sin(angle - Math.PI / 2),\r\n          5,\r\n          { ...bullet_start_dir }\r\n        )\r\n      );\r\n    player.ax -= (2 * bullet_start_dir.x) / player_size; // Note: multiply with bullet damage later\r\n    player.ay -= (2 * bullet_start_dir.y) / player_size; // Note: multiply with bullet damage later\r\n    bulletTimer = o_bulletTimer;\r\n  } else {\r\n    bulletTimer--;\r\n  }\r\n}\r\nfunction burstBullet() {\r\n  let n = 0,\r\n    randomAngle = 0,\r\n    randomSpeedMult = 0.7;\r\n  for (let i = 0; i < bullet.length; ++i) {\r\n    if (!bullet[i].state) {\r\n      randomAngle = Math.PI * (-1/6 + Math.random() * (1/3));\r\n      randomSpeedMult = 0.7 + Math.random();\r\n      let newDirX =\r\n          (bullet_start_dir.x * cos(randomAngle) -\r\n            bullet_start_dir.y * sin(randomAngle)) *\r\n          randomSpeedMult,\r\n        newDirY =\r\n          (bullet_start_dir.x * sin(randomAngle) +\r\n            bullet_start_dir.y * cos(randomAngle)) *\r\n          randomSpeedMult;\r\n      bullet[i].reset(\r\n        player.x + (player.size / 2) * cos(angle - Math.PI / 2),\r\n        player.y + (player.size / 2) * sin(angle - Math.PI / 2),\r\n        {\r\n          x: newDirX,\r\n          y: newDirY,\r\n        },\r\n        Math.sqrt(newDirX ** 2 + newDirY ** 2) / Bullet.bulletSpeed,\r\n      );\r\n      ++n;\r\n      player.ax -= (2 * bullet_start_dir.x) / player_size; // Note: multiply with bullet damage later\r\n      player.ay -= (2 * bullet_start_dir.y) / player_size; // Note: multiply with bullet damage later\r\n      if (n === maxBurstAmmount) break;\r\n    }\r\n  }\r\n  for (let i = n; i < maxBurstAmmount; ++i) {\r\n    randomAngle = Math.PI * (Math.random() / 2 - 0.25);\r\n    randomSpeedMult = 0.7 + Math.random();\r\n    let newDirX =\r\n        (bullet_start_dir.x * cos(randomAngle) -\r\n          bullet_start_dir.y * sin(randomAngle)) *\r\n        randomSpeedMult,\r\n      newDirY =\r\n        (bullet_start_dir.x * sin(randomAngle) +\r\n          bullet_start_dir.y * cos(randomAngle)) *\r\n        randomSpeedMult;\r\n    bullet.push(\r\n      new Bullet(\r\n        player.x +\r\n          (player.size / 2) *\r\n            cos(angle - Math.PI / 2 + Math.random() * 2 * Math.PI - Math.PI),\r\n        player.y +\r\n          (player.size / 2) *\r\n            sin(angle - Math.PI / 2 + Math.random() * 2 * Math.PI - Math.PI),\r\n        5,\r\n        {\r\n          x: newDirX,\r\n          y: newDirY,\r\n        },\r\n        Math.sqrt(newDirX ** 2 + newDirY ** 2) / Bullet.bulletSpeed,\r\n      )\r\n    );\r\n    player.ax -= (2 * bullet_start_dir.x) / player_size; // Note: multiply with bullet damage later\r\n    player.ay -= (2 * bullet_start_dir.y) / player_size; // Note: multiply with bullet damage later\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region Creating Enemy\r\nfunction Enemy(\r\n  o_x,\r\n  o_y,\r\n  min_v = 5,\r\n  max_v = 10,\r\n  min_r = 20,\r\n  max_r = 40,\r\n  _dir = { _x: 0, _y: 0 }\r\n) {\r\n  let nVertices = min_v + ~~(Math.random() * (max_v - min_v));\r\n  let _a = (2 * Math.PI) / nVertices;\r\n  let EnemyData = [];\r\n  let _maxR = 0;\r\n  for (let i = 0; i < nVertices; i++) {\r\n    let _r = min_r + ModifiedRandomAboveAvg() * (max_r - min_r);\r\n    if (_r > _maxR) _maxR = _r;\r\n    EnemyData.push({\r\n      ox: o_x,\r\n      oy: o_y,\r\n      x: o_x + _r * cos(i * _a),\r\n      y: o_y + _r * sin(i * _a),\r\n      ...whiteRGB,\r\n    });\r\n  }\r\n  let newCenter = getCentroidOfPolygon(EnemyData);\r\n  let _health = ~~(getAreaOfPolygon(EnemyData) / (100 * (nVertices / 2)));\r\n  for (let i = 0; i < EnemyData.length; i++) {\r\n    EnemyData[i].ox = newCenter.x;\r\n    EnemyData[i].oy = newCenter.y;\r\n    EnemyData[i].health = _health;\r\n  }\r\n\r\n  return {\r\n    data: EnemyData,\r\n    dir: {\r\n      x: _dir._x,\r\n      y: _dir._y,\r\n    },\r\n    maxR: _maxR,\r\n    o_health: _health,\r\n    state: 1,\r\n  };\r\n}\r\nfunction EnemyFromData(positon_data, _health, _dir = { x: 2, y: 0 }) {\r\n  let _enemy = {\r\n    data: positon_data,\r\n    dir: _dir,\r\n    state: 1,\r\n  };\r\n  let a = getMaxMinCo_Enemy(_enemy);\r\n  _enemy.top = a.yMin + _enemy.data[0].oy;\r\n  _enemy.bottom = a.yMax + _enemy.data[0].oy;\r\n  _enemy.right = a.xMax + _enemy.data[0].ox;\r\n  _enemy.left = a.xMin + _enemy.data[0].ox;\r\n  _enemy.maxR = Math.sqrt(\r\n    ((a.xMax - a.xMin) / 2) ** 2 + ((a.yMax - a.yMin) / 2) ** 2\r\n  );\r\n  _enemy.o_health = _health;\r\n  // for(let i = 0; i < _enemy.data.length; ++i){\r\n  //   let h = _enemy.data[i].health;\r\n  //   _enemy.data[i].health = (h > _health ? _health : h);\r\n  // }\r\n  return _enemy;\r\n}\r\nfunction newRandomEnemy() {\r\n  let _r = minR + ModifiedRandomBelowAvg() * (maxR - minR);\r\n  let e = new Enemy(\r\n    maxR + Math.random() * (c_width - maxR),\r\n    -(maxMapHeight - startMapLevel * c_height) + maxMapHeight * Math.random(),\r\n    minVertices,\r\n    maxVertices,\r\n    _r / 4,\r\n    _r,\r\n    {\r\n      _x: -6 + Math.random() * 12,\r\n      _y: -6 + Math.random() * 12,\r\n    }\r\n  );\r\n  let a = getMaxMinCo_Enemy(e);\r\n  e.top = a.yMin + e.data[0].oy;\r\n  e.bottom = a.yMax + e.data[0].oy;\r\n  e.right = a.xMax + e.data[0].ox;\r\n  e.left = a.xMin + e.data[0].ox;\r\n  return e;\r\n}\r\n//#endregion\r\n\r\n//#region Creating Player\r\nfunction createPlayer() {\r\n  return {\r\n    px: org_player_x,\r\n    py: org_player_y,\r\n    x: org_player_x,\r\n    y: org_player_y,\r\n    ax: 0,\r\n    vx: 0,\r\n    ay: 0,\r\n    vy: 0,\r\n    max_v: 8,\r\n    size: player_size,\r\n    update: function () {\r\n      this.vx += this.ax * (Math.abs(this.vx) <= this.max_v);\r\n      this.x +=\r\n        this.vx *\r\n        ((this.x > org_x || this.vx > 0) &&\r\n          (this.x < org_x + c_width || this.vx < 0));\r\n      this.vy += this.ay * (Math.abs(this.vy) <= this.max_v);\r\n      this.y += this.vy;\r\n\r\n      this.ax = 0;\r\n      this.ay = 0;\r\n      this.vx *= 0.8;\r\n      this.vy *= 0.8;\r\n    },\r\n    img: (() => {\r\n      let can = document.createElement(\"canvas\");\r\n      let _c = can.getContext(\"2d\");\r\n      can.width = player_size;\r\n      can.height = player_size;\r\n      _c.fillStyle = \"#ffffff\";\r\n      _c.strokeStyle = \"#ffffff\";\r\n      _c.beginPath();\r\n      _c.moveTo(can.width / 2, 0);\r\n      _c.lineTo(can.width, can.height);\r\n      _c.lineTo(can.width / 2, can.height / 2);\r\n      _c.lineTo(0, can.height);\r\n      _c.closePath();\r\n      _c.stroke();\r\n      _c.fill();\r\n      return can;\r\n    })(),\r\n  };\r\n}\r\nfunction resetPlayer() {\r\n  let px = player.x;\r\n  let py = player.y;\r\n\r\n  player = createPlayer();\r\n  player.px = px;\r\n  player.py = py;\r\n}\r\n//#endregion\r\n\r\n//#endregion\r\n\r\n//#region Update and Drawing Functions\r\nfunction drawEnemy(_enemy) {\r\n  let l = _enemy.data.length;\r\n  c.beginPath();\r\n  c.moveTo(_enemy.data[0].x, _enemy.data[0].y);\r\n  for (let i = 1; i < l; i++) {\r\n    c.lineTo(_enemy.data[i].x, _enemy.data[i].y);\r\n  }\r\n  c.closePath();\r\n  c.stroke();\r\n\r\n  for (let i = 0; i < l; i++) {\r\n    if (_enemy.data[i].g !== 255 && _enemy.data[i].b !== 255){\r\n      c.beginPath();\r\n      c.strokeStyle = `rgb(255,${_enemy.data[i].g},${_enemy.data[i].b})`;\r\n      c.moveTo(_enemy.data[i].x, _enemy.data[i].y);\r\n      c.lineTo(_enemy.data[(i + 1) % l].x, _enemy.data[(i + 1) % l].y);\r\n      c.stroke();\r\n    }\r\n  }\r\n  c.strokeStyle = \"#ffffff\";\r\n  // c.fill();\r\n}\r\nfunction updateEnemy(_enemy) {\r\n  let a = _enemy.dir.x,\r\n    b = _enemy.dir.y;\r\n  for (let i = 0; i < _enemy.data.length; i++) {\r\n    _enemy.data[i].x += a;\r\n    _enemy.data[i].y += b;\r\n    _enemy.data[i].ox += a;\r\n    _enemy.data[i].oy += b;\r\n  }\r\n  _enemy.right += a;\r\n  _enemy.top += b;\r\n  _enemy.left += a;\r\n  _enemy.bottom += b;\r\n  _enemy.dir.x *= 0.9999;\r\n  _enemy.dir.y *= 0.9999;\r\n}\r\nfunction drawPlayer(_player) {\r\n  c.save();\r\n  c.translate(_player.x, _player.y);\r\n  c.rotate(angle);\r\n  c.drawImage(_player.img, -_player.size / 2, -_player.size / 2);\r\n  c.restore();\r\n}\r\nfunction drawBullet(_bullet) {\r\n  c.drawImage(_bullet.img, _bullet.x - _bullet.r, _bullet.y - _bullet.r);\r\n}\r\n// function drawHealthBar(_enemy) {\r\n//   let mid = (_enemy.left + _enemy.right) / 2;\r\n//   c.strokeRect(mid - 50, _enemy.bottom + 10, 100, 10);\r\n//   c.fillRect(\r\n//     mid - 50,\r\n//     _enemy.bottom + 10,\r\n//     (_enemy.health / _enemy.o_health) * 100,\r\n//     10\r\n//   );\r\n// }\r\n//#endregion\r\n\r\n//#region Event Handling\r\ncanvas.addEventListener(\"mousemove\", (event) => {\r\n  p_angle = angle;\r\n  angle =\r\n    atan2(event.clientY + org_y - player.y, event.clientX + org_x - player.x) +\r\n    Math.PI / 2;\r\n  bullet_start_dir.x = Bullet.bulletSpeed * sin(angle);\r\n  bullet_start_dir.y = -Bullet.bulletSpeed * cos(angle);\r\n  // console.log(angle * 180 / Math.PI);\r\n});\r\nlet playerAccel = 2;\r\ndocument.addEventListener(\"keydown\", (event) => {\r\n  keyPressedPool.add(event.code);\r\n});\r\ndocument.addEventListener(\"keyup\", (event) => {\r\n  keyPressedPool.delete(event.code);\r\n});\r\ndocument.addEventListener(\"mousedown\", (event) => {\r\n  if (event.button === 0) keyPressedPool.add(\"LeftMouse\");\r\n});\r\ndocument.addEventListener(\"mouseup\", (event) => {\r\n  if (event.button === 0) keyPressedPool.delete(\"LeftMouse\");\r\n});\r\ndocument.addEventListener(\"visibilitychange\", () => {\r\n  keyPressedPool.clear();\r\n});\r\ndocument.oncontextmenu = () => false;\r\nwindow.addEventListener(\"resize\", () => {\r\n  if (window.innerHeight !== c_height) {\r\n    location.reload();\r\n  }\r\n});\r\n\r\n//#endregion\r\n\r\n//#region Set up\r\nfunction setup() {\r\n  score = 0;\r\n  enemy = [\r\n    (() => {\r\n      let _r = minR + ModifiedRandomBelowAvg() * (maxR - minR);\r\n      let e = Enemy(\r\n        c_width / 2,\r\n        c_height / 5,\r\n        minVertices,\r\n        maxVertices,\r\n        _r / 4,\r\n        _r,\r\n        {\r\n          _x: -1 + Math.random() * 2,\r\n          _y: -1 + Math.random() * 2,\r\n        }\r\n      );\r\n      let a = getMaxMinCo_Enemy(e);\r\n      e.top = a.yMin + e.data[0].oy;\r\n      e.bottom = a.yMax + e.data[0].oy;\r\n      e.right = a.xMax + e.data[0].ox;\r\n      e.left = a.xMin + e.data[0].ox;\r\n      return e;\r\n    })(),\r\n  ];\r\n  for (let i = 1; i < n_enemy; i++) {\r\n    enemy.push(newRandomEnemy());\r\n  }\r\n  player = createPlayer();\r\n}\r\nsetup();\r\n//#endregion\r\n\r\n//#region Main Loop\r\n// _________________MAIN_LOOP_________________\r\nfunction draw() {\r\n  player.py = player.y;\r\n  player.px = player.x;\r\n\r\n  player.update();\r\n  c.clearRect(org_x, org_y, c_width, c_height);\r\n\r\n  for (let i = 0; i < enemy.length; i++) {\r\n    if (enemy[i].state) {\r\n      updateEnemy(enemy[i]);\r\n      if (enemy[i].bottom > org_y - 10 && enemy[i].top < org_y + c_height + 10)\r\n        enemyInView.add(i);\r\n      else enemyInView.delete(i);\r\n    } else enemyInView.delete(i);\r\n  }\r\n  //#region Draw Stuffs\r\n  for (let i of enemyInView) {\r\n    drawEnemy(enemy[i]);\r\n  }\r\n  drawPlayer(player);\r\n  c.fillText(`Score(x${scoremult}):${~~score}`, org_x + 10, org_y + 32);\r\n  for (let i = 0; i < popUps.length; i++) {\r\n    if (popUps[i][3] !== 0) {\r\n      c.fillText(popUps[i][0], popUps[i][1], popUps[i][2]);\r\n      popUps[i][3]--;\r\n      popUps[i][2] -= 7;\r\n    }\r\n  }\r\n  // for (let i in enemiesToShowHealth) {\r\n  //   if (enemiesToShowHealth[i] === 0 || !enemy[i].state) {\r\n  //     delete enemiesToShowHealth[i];\r\n  //     continue;\r\n  //   }\r\n  //   drawHealthBar(enemy[i]);\r\n  //   enemiesToShowHealth[i]--;\r\n  // }\r\n  //#endregion\r\n\r\n  //#region Enemy Wrap Around\r\n  for (let i = 0; i !== enemy.length; i++) {\r\n    let left = enemy[i].left;\r\n    let right = enemy[i].right;\r\n    let top = enemy[i].top;\r\n    let bottom = enemy[i].bottom;\r\n    if (left > org_x + c_width) {\r\n      let a = right - org_x;\r\n      enemy[i].left -= a;\r\n      enemy[i].right -= a;\r\n      for (let j = 0; j !== enemy[i].data.length; j++) {\r\n        enemy[i].data[j].x -= a;\r\n        enemy[i].data[j].ox -= a;\r\n      }\r\n    } else if (right < org_x) {\r\n      let a = c_width + org_x - left;\r\n      enemy[i].left += a;\r\n      enemy[i].right += a;\r\n      for (let j = 0; j !== enemy[i].data.length; j++) {\r\n        enemy[i].data[j].x += a;\r\n        enemy[i].data[j].ox += a;\r\n      }\r\n    }\r\n    if (bottom < -maxMapHeight) {\r\n      let a = c_height - top;\r\n      enemy[i].top += a;\r\n      enemy[i].bottom += a;\r\n      for (let j = 0; j !== enemy[i].data.length; j++) {\r\n        enemy[i].data[j].y += a;\r\n        enemy[i].data[j].oy += a;\r\n      }\r\n    } else if (top > c_height) {\r\n      let a = maxMapHeight + bottom;\r\n      enemy[i].top -= a;\r\n      enemy[i].bottom -= a;\r\n      for (let j = 0; j !== enemy[i].data.length; j++) {\r\n        enemy[i].data[j].y -= a;\r\n        enemy[i].data[j].oy -= a;\r\n      }\r\n    }\r\n  }\r\n  //#endregion\r\n\r\n  //#region Draw bullets & Collision detection between bullets & others\r\n  for (let i = 0; i < bullet.length; i++) {\r\n    if (bullet[i].state) {\r\n      drawBullet(bullet[i]);\r\n      bullet[i].px = bullet[i].x;\r\n      bullet[i].py = bullet[i].y;\r\n      bullet[i].update();\r\n\r\n      let b_x = bullet[i].x,\r\n        b_y = bullet[i].y;\r\n      //#region Player Collision Detection\r\n      if (isHardMode) {\r\n        let squareDist = (player.x - b_x) ** 2 + (player.y - b_y) ** 2;\r\n        if (squareDist <= (player.size / 3 + bullet[i].r) ** 2) {\r\n          resetPlayer(player);\r\n        }\r\n      }\r\n      //#endregion\r\n\r\n      //#region Enemy Collsion Detection\r\n      for (let m of enemyInView) {\r\n        if (!enemy[m].state) continue;\r\n        if (\r\n          !(\r\n            b_x > enemy[m].left - 10 &&\r\n            b_x < enemy[m].right + 10 &&\r\n            b_y < enemy[m].bottom + 10 &&\r\n            b_y > enemy[m].top - 10\r\n          )\r\n        )\r\n          continue;\r\n        // enemiesToShowHealth[m] = 10;\r\n        handleCollision_Bullet_Enemy(bullet[i], enemy[m]);\r\n      }\r\n      //#endregion\r\n\r\n      if (\r\n        b_y < org_y - bullet[i].r ||\r\n        b_y > org_y + c_height ||\r\n        b_x < org_x ||\r\n        b_x > org_x + c_width ||\r\n        Math.sqrt(bullet[i].dir.x ** 2 + bullet[i].dir.y ** 2) < 0.65\r\n      ) {\r\n        bullet[i].state = 0;\r\n        continue;\r\n      }\r\n      // drawBullet(bullet[i]);\r\n    }\r\n  }\r\n  //#endregion\r\n\r\n  //#region Player collision with enemies\r\n  for (let m of enemyInView) {\r\n    if (!enemy[m].state) continue;\r\n    let player_x = player.x,\r\n      player_y = player.y;\r\n    if (\r\n      player_x > enemy[m].left - 10 &&\r\n      player_x < enemy[m].right + 10 &&\r\n      player_y < enemy[m].bottom + 10 &&\r\n      player_y > enemy[m].top - 10\r\n    ) {\r\n      for (let j = 0, l = enemy[m].data.length; j !== l; j++) {\r\n        let x3 = enemy[m].data[j].x,\r\n          y3 = enemy[m].data[j].y,\r\n          x4 = enemy[m].data[(j + 1) % l].x,\r\n          y4 = enemy[m].data[(j + 1) % l].y;\r\n        if (\r\n          checkCollision(\r\n            player_x,\r\n            player_y,\r\n            player.px + enemy[m].dir.x,\r\n            player.py + enemy[m].dir.y,\r\n            x3,\r\n            y3,\r\n            x4,\r\n            y4\r\n          )\r\n        ) {   \r\n          resetPlayer(player);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //#endregion\r\n\r\n  //#region Camera moves with player\r\n  if (player.py !== player.y || player.px !== player.x) {\r\n    translate_x = (player.px - player.x) * 0.1;\r\n    translate_y = player.py - player.y;\r\n    org_x -= translate_x;\r\n    if (player.y >= org_player_y) translate_y = org_y;\r\n    else if (player.y <= -maxMapHeight + org_player_y)\r\n      translate_y = org_y + maxMapHeight;\r\n\r\n    org_y -= translate_y;\r\n    c.translate(translate_x, translate_y);\r\n  }\r\n  //#endregion\r\n\r\n  //#region Input check\r\n  if (keyPressedPool.size) {\r\n    if (controlKey.focus.some((x) => keyPressedPool.has(x))) {\r\n      player.max_v = 4;\r\n      o_bulletTimer = 2;\r\n    } else {\r\n      player.max_v = 8;\r\n      o_bulletTimer = 4;\r\n    }\r\n\r\n    if (controlKey.up.some((x) => keyPressedPool.has(x)))\r\n      player.ay = -playerAccel;\r\n    if (controlKey.down.some((x) => keyPressedPool.has(x)))\r\n      player.ay = playerAccel;\r\n    if (controlKey.left.some((x) => keyPressedPool.has(x))) {\r\n      player.ax = -playerAccel;\r\n    }\r\n    if (controlKey.right.some((x) => keyPressedPool.has(x)))\r\n      player.ax = playerAccel;\r\n    if (controlKey.shoot.some((x) => keyPressedPool.has(x))) {\r\n      burstBullet();\r\n    }\r\n  }\r\n  //#endregion\r\n  requestAnimationFrame(draw);\r\n}\r\ndraw();\r\n//#endregion\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}