parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"epB2":[function(require,module,exports) {
function t(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,r)}return e}function a(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?t(Object(r),!0).forEach(function(t){l(a,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(r,t))})}return a}function e(t){return i(t)||o(t)||n(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,a){if(t){if("string"==typeof t)return h(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(t,a):void 0}}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function i(t){if(Array.isArray(t))return h(t)}function h(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=new Array(a);e<a;e++)r[e]=t[e];return r}function d(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function y(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,a,e){return a&&y(t.prototype,a),e&&y(t,e),t}function l(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var x=Math.sin,s=Math.cos,u=Math.atan2,c={up:["ArrowUp","KeyW"],down:["ArrowDown","KeyS"],left:["ArrowLeft","KeyA"],right:["ArrowRight","KeyD"],shoot:["KeyZ","LeftMouse"],focus:["ShiftLeft"]},v=document.getElementById("main-canvas"),p=v.getContext("2d"),g=window.screen.width,m=window.innerHeight;v.width=g,v.height=m,v.style.background="#000000",p.lineWidth=3,p.strokeStyle="#ffffff",p.fillStyle="#ffffff",p.font="22px pressStart";var M,w=300,b=40,_=7,P=25,S=7*m,O=0,k=15,j=[],E=new Set,A=0,I=0,L=0,z=0,T=4,R=0,q=0,D=0,C=g/2,K=m/1.5,H=30,U=[],W=0,B=1,F=[],X={0:0},Y=0,Z=0,$=function(){function t(a,e,r){var n,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:0,y:-t.bulletSpeed};d(this,t),this.x=a,this.y=e,this.px=a,this.py=e,this.r=r,this.img=(n=document.createElement("canvas"),o=n.getContext("2d"),n.width=2*r,n.height=2*r,o.fillStyle="#ffffff",o.beginPath(),o.arc(r,r,r,0,2*Math.PI),o.fill(),n),this.dir=i,this.state=1,this.damage=1}return f(t,[{key:"update",value:function(){this.x+=this.dir.x,this.y+=this.dir.y}},{key:"reset",value:function(a,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:-t.speed};this.x=a,this.y=e,this.px=a,this.py=e,this.dir=r,this.state=1,this.damage=1}}]),t}();l($,"bulletSpeed",14);var G={x:0,y:-$.bulletSpeed};function J(){var t=Math.random();return 4.5*Math.pow(t,3)-8.3*Math.pow(t,2)+4.8*t}function N(){var t=Math.random();return 2.2*Math.pow(t,3)-3*Math.pow(t,2)+1.8*t}function Q(t){var a=t.data.map(function(t){return t.x-t.ox}),r=Math.max.apply(Math,e(a)),n=Math.min.apply(Math,e(a)),o=t.data.map(function(t){return t.y-t.oy});return{xMax:r,xMin:n,yMax:Math.max.apply(Math,e(o)),yMin:Math.min.apply(Math,e(o))}}function V(t,a){var e=Math.sqrt(Math.pow(t,2)+Math.pow(a,2));return{x:t/e,y:a/e}}function tt(t,a,e,r,n,o,i,h){var d=(h-o)*(e-t)-(i-n)*(r-a),y=((i-n)*(a-o)-(h-o)*(t-n))/d,f=((e-t)*(a-o)-(r-a)*(t-n))/d;return y>=0&&y<=1&&f>=0&&f<=1?{x:t+y*(e-t),y:a+y*(r-a)}:null}function at(t,a){for(var e=t.x,r=t.y,n=-1,o=0,i=0,h=0,d=0,y=0,f=0,l=a.data.length;f!==l;f++){var x=a.data[f].x,s=a.data[f].y,u=a.data[(f+1)%l].x,c=a.data[(f+1)%l].y,v=s-c,p=u-x,g=-v/p,m=v/p*x+s,M=(e+g*r-g*m)/(1+g*g),w=(g*g*r+g*e+m)/(1+g*g),b=(M-e)*(M-e)+(w-r)*(w-r);(M<x&&M>u||M>x&&M<u)&&(-1===n?(n=f,o=b,i=M,h=w,d=s-c,y=u-x):b<o&&(n=f,o=b,i=M,h=w,d=v,y=p))}var _=V(d,y),P=h-r,S=(_.x,_.y,0);return o<t.r*t.r&&{x:e-(S=t.r-Math.sqrt(o))*_.x,y:r-S*_.y,normal:_,index:n}}function et(t){for(var a=0,e=0,r=0,n=0,o=t.length;n!==o;n++){var i=t[n].x*t[(n+1)%o].y-t[(n+1)%o].x*t[n].y;a+=i,e+=(t[n].x+t[(n+1)%o].x)*i,r+=(t[n].y+t[(n+1)%o].y)*i}var h=1/(6*(a*=.5));return{x:e*=h,y:r*=h}}function rt(t){for(var a=0,e=t.length;a!==e;a++)if(tt(t[a].x,t[a].y,t[(a+1)%e].x,t[(a+1)%e].y,t[(a+2)%e].x,t[(a+2)%e].y,t[(a+3)%e].x,t[(a+3)%e].y))return!0;return!1}function nt(t){for(var a=0,e=1,r=0;2!==r;r++){for(var n=0,o=t.length;n!==o;n++)a+=e*t[(n+r)%o].x*t[(n+r+e)%o].y;e=-1}return a=.5*Math.abs(a)}function ot(t,a,e,r){for(var n=1,o=0;o<F.length;o++)if(!F[o][3]){F[o][0]=t,F[o][1]=a,F[o][2]=e,F[o][3]=r,n=0;break}n&&F.push([t,a,e,r])}function it(t,e){if(!(t.health>0)){t.state=0,ot(~~t.o_health,t.data[0].ox,t.data[0].oy,20),W+=t.o_health*B;var r,n=0,o=e+1,i=(e+1+~~(t.data.length/2))%t.data.length,h=t.data,d=h[0].ox,y=h[0].oy,f=a({},h[i]);if((r=o<i?h.splice(o,i-o+1,{ox:h[0].ox,oy:h[0].oy,x:h[0].ox,y:h[0].oy},f):h.splice(i,o-i,f,{ox:h[0].ox,oy:h[0].oy,x:h[0].ox,y:h[0].oy})).push({ox:h[0].ox,oy:h[0].oy,x:h[0].ox,y:h[0].oy}),r.length>3&&!rt(r)){for(var l=et(r),x=0;x<r.length;x++)r[x].ox=l.x,r[x].oy=l.y;for(var s=1,u=0;u<t.length;u++)if(!t[u].state){t[u]=new yt(r,{x:t.dir.x+2*(r[0].ox-d)/t.o_health,y:t.dir.y+2*(r[0].oy-y)/t.o_health}),nt(t[u].data)<1800&&(t[u].state=0,n--),s=0;break}s&&(U.push(new yt(r,{x:t.dir.x+2*(r[0].ox-d)/t.o_health,y:t.dir.y+2*(r[0].oy-y)/t.o_health})),nt(U[U.length-1].data)<1800&&(U[U.length-1].state=0,n--)),n++}var c=h;if(c.length>3&&!rt(c)){for(var v=et(c),p=0;p<c.length;p++)c[p].ox=v.x,c[p].oy=v.y;for(var g=1,m=0;m<t.length;m++)if(!t[m].state){t[m]=new yt(c,{x:t.dir.x+2*(c[0].ox-d)/t.o_health,y:t.dir.y+2*(c[0].oy-y)/t.o_health}),nt(t[m].data)<1800&&(t[m].state=0,n--),g=0;break}g&&(U.push(new yt(c,{x:t.dir.x+2*(c[0].ox-d)/t.o_health,y:t.dir.y+2*(c[0].oy-y)/t.o_health})),nt(U[U.length-1].data)<1800&&(U[U.length-1].state=0,n--)),n++}if(Y&&!n){for(var M=1,w=0;w<U.length;w++)if(!U[w].state){U[w]=ft(),M=0;break}M&&U.push(ft())}}}function ht(t,a){for(var e,r,n,o=t.x,i=t.y,h=0,d=0,y=0,f=a.data.length;y!==f;y++){var l=a.data[y].x,x=a.data[y].y,s=a.data[(y+1)%f].x,u=a.data[(y+1)%f].y,c=tt(o,i,t.px+a.dir.x,t.py+a.dir.y,l,x,s,u);c&&(d=y,h++,n=V(x-u,s-l),e=c.x,r=c.y)}if(1===h){var v=t.dir.x,p=t.dir.y,g=n.x*v+n.y*p;g>=0?(t.dir.x-=2*n.x*g-a.dir.x,t.dir.y-=2*n.y*g-a.dir.y):(t.dir.x+=a.dir.x,t.dir.y+=a.dir.y),a.dir.x+=(a.dir.x<M.max_v-2)*(v-t.dir.x)*(50/Math.pow(a.maxR,2)),a.dir.y+=(a.dir.y<M.max_v-2)*(p-t.dir.y)*(50/Math.pow(a.maxR,2));var m=V(t.dir.x,t.dir.y);t.x=e+.1*m.x,t.y=r+.1*m.y,a.health-=t.damage,W+=t.damage*B,ot(~~(10*t.damage)/10,e,r,10),t.damage*=Math.sqrt((Math.pow(t.dir.x,2)+Math.pow(t.dir.y,2))/(Math.pow(v,2)+Math.pow(p,2))),it(a,d)}else 0!==h&&(t.state=0,a.health-=t.damage,W+=t.damage*B)}function dt(t,a){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:40,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{_x:0,_y:0},h=e+~~(Math.random()*(r-e)),d=2*Math.PI/h,y=[],f=0,l=0;l<h;l++){var u=n+J()*(o-n);u>f&&(f=u),y.push({ox:t,oy:a,x:t+u*s(l*d),y:a+u*x(l*d)})}for(var c=et(y),v=0;v<y.length;v++)y[v].ox=c.x,y[v].oy=c.y;var p=~~(nt(y)/300);return{data:y,dir:{x:i._x,y:i._y},maxR:f,health:p,o_health:p,state:1}}function yt(t){var a={data:t,dir:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:2,y:0},state:1},e=Q(a);a.top=e.yMin+a.data[0].oy,a.bottom=e.yMax+a.data[0].oy,a.right=e.xMax+a.data[0].ox,a.left=e.xMin+a.data[0].ox,a.maxR=Math.sqrt(Math.pow((e.xMax-e.xMin)/2,2)+Math.pow((e.yMax-e.yMin)/2,2));var r=~~(nt(t)/300);return a.health=r,a.o_health=r,a}function ft(){var t=b+N()*(w-b),a=new dt(w+Math.random()*(g-w),-(S-O*m)+S*Math.random(),_,P,t/4,t,{_x:12*Math.random()-6,_y:12*Math.random()-6}),e=Q(a);return a.top=e.yMin+a.data[0].oy,a.bottom=e.yMax+a.data[0].oy,a.right=e.xMax+a.data[0].ox,a.left=e.xMin+a.data[0].ox,a}function lt(){return{px:C,py:K,x:C,y:K,ax:0,vx:0,ay:0,vy:0,max_v:8,size:H,update:function(){this.vx+=this.ax*(Math.abs(this.vx)<=this.max_v),this.x+=this.vx*((this.x>q||this.vx>0)&&(this.x<q+g||this.vx<0)),this.vy+=this.ay*(Math.abs(this.vy)<=this.max_v),this.y+=this.vy,this.vx*=.8,this.vy*=.8},img:(t=document.createElement("canvas"),a=t.getContext("2d"),t.width=H,t.height=H,a.fillStyle="#ffffff",a.strokeStyle="#ffffff",a.beginPath(),a.moveTo(t.width/2,0),a.lineTo(t.width,t.height),a.lineTo(t.width/2,t.height/2),a.lineTo(0,t.height),a.closePath(),a.stroke(),a.fill(),t)};var t,a}function xt(){var t=M.x,a=M.y;(M=lt()).px=t,M.py=a}function st(t){p.beginPath(),p.moveTo(t.data[0].x,t.data[0].y);for(var a=1;a<t.data.length;a++)p.lineTo(t.data[a].x,t.data[a].y);p.closePath(),p.stroke()}function ut(t){for(var a=t.dir.x,e=t.dir.y,r=0;r<t.data.length;r++)t.data[r].x+=a,t.data[r].y+=e,t.data[r].ox+=a,t.data[r].oy+=e;t.right+=a,t.top+=e,t.left+=a,t.bottom+=e,t.dir.x*=.9999,t.dir.y*=.9999}function ct(t){p.save(),p.translate(t.x,t.y),p.rotate(I),p.drawImage(t.img,-t.size/2,-t.size/2),p.restore()}function vt(t){p.drawImage(t.img,t.x-t.r,t.y-t.r)}function pt(t){var a=(t.left+t.right)/2;p.strokeRect(a-50,t.bottom+10,100,10),p.fillRect(a-50,t.bottom+10,t.health/t.o_health*100,10)}v.addEventListener("mousemove",function(t){A=I,I=u(t.clientY+D-M.y,t.clientX+q-M.x)+Math.PI/2,G.x=$.bulletSpeed*x(I),G.y=-$.bulletSpeed*s(I)});var gt=2;function mt(){var t,a,e;W=0,U=[(t=b+N()*(w-b),a=dt(g/2,m/5,_,P,t/4,t,{_x:2*Math.random()-1,_y:2*Math.random()-1}),e=Q(a),a.top=e.yMin+a.data[0].oy,a.bottom=e.yMax+a.data[0].oy,a.right=e.xMax+a.data[0].ox,a.left=e.xMin+a.data[0].ox,a)];for(var r=1;r<k;r++)U.push(ft());M=lt()}function Mt(){M.py=M.y,M.px=M.x,M.update(),p.clearRect(q,D,g,m);for(var t=0;t<U.length;t++)U[t].state&&ut(U[t]);for(var e=0;e<U.length;e++)U[e].state&&st(U[e]);ct(M),p.fillText("Score(x".concat(B,"):").concat(~~W),q+10,D+32);for(var r=0;r<F.length;r++)0!==F[r][3]&&(p.fillText(F[r][0],F[r][1],F[r][2]),F[r][3]--,F[r][2]-=7);for(var n in X)0!==X[n]&&U[n].state?(pt(U[n]),X[n]--):delete X[n];for(var o=0;o!==U.length;o++){var i=U[o].left,h=U[o].right,d=U[o].top,y=U[o].bottom;if(i>q+g){var f=h-q;U[o].left-=f,U[o].right-=f;for(var l=0;l!==U[o].data.length;l++)U[o].data[l].x-=f,U[o].data[l].ox-=f}else if(h<q){var u=g+q-i;U[o].left+=u,U[o].right+=u;for(var v=0;v!==U[o].data.length;v++)U[o].data[v].x+=u,U[o].data[v].ox+=u}if(y<-S){var w=m-d;U[o].top+=w,U[o].bottom+=w;for(var b=0;b!==U[o].data.length;b++)U[o].data[b].y+=w,U[o].data[b].oy+=w}else if(d>m){var _=S+y;U[o].top-=_,U[o].bottom-=_;for(var P=0;P!==U[o].data.length;P++)U[o].data[P].y-=_,U[o].data[P].oy-=_}}for(var O=0;O<j.length;O++)if(j[O].state){vt(j[O]),j[O].px=j[O].x,j[O].py=j[O].y,j[O].update();var k=j[O].x,A=j[O].y;if(Z)Math.pow(M.x-k,2)+Math.pow(M.y-A,2)<=Math.pow(M.size/3+j[O].r,2)&&xt(M);for(var C=0,H=U.length;C!==H;C++)U[C].state&&k>U[C].left-10&&k<U[C].right+10&&A<U[C].bottom+10&&A>U[C].top-10&&(X[C]=10,ht(j[O],U[C]));if(A<D-j[O].r||A>D+m||k<q||k>q+g||Math.sqrt(Math.pow(j[O].dir.x,2)+Math.pow(j[O].dir.y,2))<.65){j[O].state=0;continue}}for(var Y=0,J=U.length;Y!==J;Y++)if(U[Y].state){var N=M.x,Q=M.y;if(N>U[Y].left-10&&N<U[Y].right+10&&Q<U[Y].bottom+10&&Q>U[Y].top-10)for(var V=0,at=U[Y].data.length;V!==at;V++){var et=U[Y].data[V].x,rt=U[Y].data[V].y,nt=U[Y].data[(V+1)%at].x,ot=U[Y].data[(V+1)%at].y;if(tt(N,Q,M.px+U[Y].dir.x,M.py+U[Y].dir.y,et,rt,nt,ot)){xt(M);break}}}if(M.py===M.y&&M.px===M.x||(L=.1*(M.px-M.x),z=M.py-M.y,q-=L,M.y>=K?z=D:M.y<=-S+K&&(z=D+S),D-=z,p.translate(L,z)),E.size&&(c.focus.filter(function(t){return E.has(t)}).length?(M.max_v=4,T=2):(M.max_v=8,T=4),c.up.filter(function(t){return E.has(t)}).length&&(M.ay=-gt),c.down.filter(function(t){return E.has(t)}).length&&(M.ay=gt),c.left.filter(function(t){return E.has(t)}).length&&(M.ax=-gt),c.right.filter(function(t){return E.has(t)}).length&&(M.ax=gt),c.shoot.filter(function(t){return E.has(t)}).length))if(R)R--;else{for(var it=1,dt=0;dt<j.length;dt++)if(!j[dt].state){j[dt].reset(M.x+M.size/2*s(I-Math.PI/2),M.y+M.size/2*x(I-Math.PI/2),a({},G)),it=0;break}it&&j.push(new $(M.x+M.size/2*s(I-Math.PI/2),M.y+M.size/2*x(I-Math.PI/2),5,a({},G))),R=T}requestAnimationFrame(Mt)}document.addEventListener("keydown",function(t){E.add(t.code)}),document.addEventListener("keyup",function(t){E.delete(t.code),(c.left.includes(t.code)||c.right.includes(t.code))&&(M.ax=0),(c.up.includes(t.code)||c.down.includes(t.code))&&(M.ay=0)}),document.addEventListener("mousedown",function(t){0===t.button&&E.add("LeftMouse")}),document.addEventListener("mouseup",function(t){0===t.button&&E.delete("LeftMouse")}),document.addEventListener("visibilitychange",function(){E.clear(),M.ax=0,M.ay=0}),document.oncontextmenu=function(){return!1},window.addEventListener("resize",function(){window.innerHeight!==m&&location.reload()}),mt(),Mt();
},{}]},{},["epB2"], null)